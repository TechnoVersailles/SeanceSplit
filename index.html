<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Chronomètres de Séances Pédagogiques - App Éducative</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>SeanceSplit</h1>
            <nav>
                <button id="btnAteliers" class="nav-btn active" title="Gestion Ateliers">
                    <i class="fas fa-tools"></i>
                    <span class="nav-text">Ateliers</span>
                </button>
                <button id="btnSeances" class="nav-btn" title="Gestion Séances">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <span class="nav-text">Séances</span>
                </button>
                <button id="btnChronos" class="nav-btn" title="Gestion Chronomètres">
                    <i class="fas fa-stopwatch"></i>
                    <span class="nav-text">Chronomètres</span>
                </button>
                <button id="btnGrille" class="nav-btn" title="Gestion Grille">
                    <i class="fas fa-th"></i>
                    <span class="nav-text">Grille</span>
                </button>
                <button id="btnData" class="nav-btn" title="Sauvegarde">
                    <i class="fas fa-save"></i>
                    <span class="nav-text">Sauvegarde</span>
                </button>
                <button id="btnVisualisation" class="nav-btn" title="Visualisation Séances">
                    <i class="fas fa-play-circle"></i>
                    <span class="nav-text">Visualisation</span>
                </button>
            </nav>
        </header>
        
        <main>
            <!-- Section Ateliers -->
            <section id="ateliersSection" class="section active">
                <h2>Gestion des Ateliers</h2>
                <div class="form-container">
                    <input type="text" id="atelierNom" placeholder="Nom de l'atelier" required>
                    <input type="file" id="atelierImage" accept="image/*">
                    <textarea id="atelierDescription" placeholder="Description de l'atelier"></textarea>
                    <button id="btnAddAtelier">Ajouter Atelier</button>
                </div>
                
                <div class="list-container">
                    <h3>Liste des Ateliers</h3>
                    <table id="ateliersTable">
                        <thead>
                            <tr>
                                <th>Nom</th>
                                <th>Image</th>
                                <th>Description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ateliersList">
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Section Séances -->
            <section id="seancesSection" class="section">
                <h2>Gestion des Séances</h2>
                <div class="form-container">
                    <input type="text" id="seanceNom" placeholder="Nom de la séance" required>
                    <select id="seanceAtelier">
                        <option value="">Sélectionner un atelier</option>
                    </select>
                    <textarea id="seanceDescription" placeholder="Description de la séance"></textarea>
                    <button id="btnAddSeance">Ajouter Séance</button>
                </div>
                
                <div class="list-container">
                    <h3>Liste des Séances</h3>
                    <table id="seancesTable">
                        <thead>
                            <tr>
                                <th>Nom</th>
                                <th>Atelier</th>
                                <th>Description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="seancesList">
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Section Chronomètres -->
            <section id="chronosSection" class="section">
                <h2>Gestion des Chronomètres</h2>
                <div class="form-container">
                    <select id="chronoSeance">
                        <option value="">Sélectionner une séance</option>
                    </select>
                    <input type="text" id="chronoTitre" placeholder="Titre du chronomètre" required>
                    <input type="number" id="chronoDuree" placeholder="Durée (secondes)" min="1" required>
                    <textarea id="chronoTravail" placeholder="Travail à effectuer"></textarea>
                    <button id="btnAddChrono">Ajouter Chronomètre</button>
                </div>

                <div class="form-container generator-container">
                    <h3>Générateur Rapide de Séquences</h3>
                    <div class="generator-inputs">
                        <select id="genDuration">
                            <option value="3600">Durée totale : 1h (60 min)</option>
                            <option value="5400">Durée totale : 1h 30 (90 min)</option>
                            <option value="7200">Durée totale : 2h (120 min)</option>
                        </select>
                        <input type="number" id="genParts" placeholder="Nombre de parties" min="1" value="4">
                        <button id="btnGenerate">Générer les chronomètres</button>
                    </div>
                    <small>Crée automatiquement des chronomètres de durée égale pour la séance sélectionnée ci-dessus.</small>
                </div>
                
                <div class="list-container">
                    <h3>Liste des Chronomètres</h3>
                    <table id="chronosTable">
                        <thead>
                            <tr>
                                <th>Séance</th>
                                <th>Titre</th>
                                <th>Durée</th>
                                <th>Travail</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="chronosList">
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Section Grille Horaire -->
            <section id="grilleSection" class="section">
                <h2>Gestion de la Grille Horaire</h2>
                <div class="form-container">
                    <input type="text" id="slotEstablishment" placeholder="Établissement (ex: École A)" list="establishmentList">
                    <datalist id="establishmentList"></datalist>
                    <input type="text" id="slotNom" placeholder="Nom du créneau (ex: M1, 8h-9h)" required>
                    <div class="time-inputs">
                        <label>Début : <input type="time" id="slotDebut" required></label>
                        <label>Fin : <input type="time" id="slotFin" required></label>
                    </div>
                    <button id="btnAddSlot">Ajouter Créneau</button>
                </div>
                
                <div class="list-container">
                    <h3>Liste des Créneaux</h3>
                    <table id="grilleTable">
                        <thead>
                            <tr>
                                <th>Établissement</th>
                                <th>Nom</th>
                                <th>Horaire</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="grilleList">
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section Sauvegarde -->
            <section id="dataSection" class="section">
                <h2>Sauvegarde et Chargement des Données</h2>
                <div class="form-container">
                    <h3>Exporter</h3>
                    <p>Téléchargez une copie de toutes vos données (ateliers, séances, chronomètres, grille) sur votre ordinateur.</p>
                    <button id="btnExport">Exporter les données (JSON)</button>
                </div>
                
                <div class="form-container">
                    <h3>Importer</h3>
                    <p>Restaurez vos données à partir d'un fichier de sauvegarde. <strong>Attention : cela écrasera les données actuelles.</strong></p>
                    <input type="file" id="fileImport" accept=".json">
                    <button id="btnImport" style="background-color: #dc3545;">Importer les données</button>
                </div>

                <div class="form-container">
                    <h3>Actions Rapides</h3>
                    <p>Générez des données pour tester l'application ou effacez tout pour recommencer à zéro.</p>
                    <div class="actions-row">
                        <button id="btnDemo" style="background-color: #17a2b8;">Mode Démo (Exemples)</button>
                        <button id="btnReset" style="background-color: #343a40;">Réinitialiser Tout (Reset)</button>
                    </div>
                </div>
            </section>

            <!-- Section Visualisation -->
            <section id="visualisationSection" class="section">
                <h2>Visualisation des Séances Chronométrées</h2>
                <div class="selection-container">
                    <label for="visuSeanceSelect">Sélectionnez une séance : </label>
                    <select id="visuSeanceSelect">
                        <option value="">Choisissez une séance</option>
                    </select>
                    <div class="options-group">
                        <div class="option-item" title="Ajuste la durée pour finir à l'heure de la grille">
                            <input type="checkbox" id="visuAlignGrid">
                            <label for="visuAlignGrid">Aligner grille</label>
                        </div>
                        <select id="visuEstablishmentSelect" style="display: none; padding: 5px; border-radius: 5px; border: 1px solid #ced4da;">
                            <option value="">-- Établissement --</option>
                        </select>
                        <div class="option-item" title="Passe automatiquement au chrono suivant">
                            <input type="checkbox" id="autoPlay" checked>
                            <label for="autoPlay">Enchaînement auto</label>
                        </div>
                    </div>
                    <button id="btnStartSession">Démarrer la séance</button>
                </div>
                
                <div id="sessionDisplay" class="session-display hidden">
                    <div id="workshopTitleBlock" class="timer-title-block">
                        <h3 id="workshopTitle">Titre de l'atelier</h3>
                    </div>
                    <div id="progressBar" class="progress-bar"></div>
                    
                    <div class="current-timer">
                        <div id="timerTitleBlock" class="timer-title-block mode-border-red">
                            <h3 id="currentTimerTitle">Titre du chronomètre actuel</h3>
                            <p id="currentWork">Travail à effectuer</p>
                        </div>
                        <div class="timer-display">
                            <div id="globalTimeGroup" class="time-group">
                                <span class="time-label">Heure Globale</span>
                                <div id="localTime" class="time-value">--:--</div>
                            </div>
                            <div id="chronoTimeGroup" class="time-group">
                                <span class="time-label">Chronomètre</span>
                                <div id="chronoTime" class="time-value"><span id="timerMinutes">00</span>:<span id="timerSeconds">00</span></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="controls">
                        <button id="btnExtend">Étendre au chrono suivant</button>
                        <button id="btnToggleMode" title="Changer le style d'affichage"><i class="fas fa-palette"></i></button>
                    </div>
                    
                    <div class="timeline">
                        <h4>Chronologie de la séance</h4>
                        <div id="timelineContainer"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <script src="app.js"></script>
</body>
</html>